<meta charset="utf-8">
<script>
var sum =0;

function getRandomInt(min,max){
	return Math.floor(Math.random()* (max -min +1))+min;
}
function getCard(){
	var cards = ['6','7','8','9','10','J','Q','K','A'];
	return cards[getRandomInt(0,cards.length-1)];
}
function getSum(arr){
	for (var i =0; i<arr.length; i++) {
		if ( arr[i] == 'Q' || arr[i] == 'J' || arr[i] == 'K' || arr[i] == 'A') {
			sum = parseInt(sum+10);
		} else{
		sum = sum+Math.floor(arr[i]);
	}
	}
	return sum;
}
function getSTatus(){
	return 'Dealer: ' + dealer.join(' ') + ' player: ' + player.join(' ') + '.';
}
var dealer = [getCard()];
var player = [getCard(),getCard()];
//var result = getSum(player);

if (getSum(player) == 21) {
	alert('Black Jack!')
} else {
var answer = '';
do {
	answer = prompt(getSTatus() + ' Dou you wont cards? 1 -yes, 2 -no.');
		if (answer == '1'){
			player.push(getCard());
		}
		sum = getSum(player);
		if (sum > 21 ){
			alert('Failed player.' + getSTatus());
			break;
		}else if (sum == 21 ){
			alert('Black Jack:' + getSTatus());
				break;
		} else {
			//player enaught 
			while (getSum(dealer) < 17){
				dealer.push(getCard());
			};

			var sumDealer = getSum(dealer);
			var sumPlayer = getSum(player);

			if (sumDealer == 21){
				alert('The dealer has Blackjack.'+ getSTatus());
			} else if (sumDealer > 21){
				alert('The dealer has lost.'+ getSTatus());
			} else if (sumDealer == sumPlayer){
				alert('The dealer equal with player.'+ getSTatus());
			}  else if (sumPlayer > sumDealer){
				alert('The player won.'+ getSTatus());
			}   else {
				alert('The player loss.'+ getSTatus());
			}

		}

	alert(getSTatus());
} while(answer == '1');
}
</script>
